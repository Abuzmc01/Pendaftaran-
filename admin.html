<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard Admin - MDH Cloud</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif}
    body{background:#0d1117;color:#e6e6e6;padding:20px}
    header{background:#161b22;padding:16px;border-bottom:1px solid #30363d;font-size:20px;font-weight:600;color:#58a6ff;text-align:center;border-radius:8px}
    .container{max-width:1100px;background:#161b22;border:1px solid #30363d;margin:28px auto;padding:24px;border-radius:10px}

    table{width:100%;border-collapse:collapse;margin-top:18px}
    th,td{border:1px solid #30363d;padding:10px;text-align:left;font-size:14px}
    th{background:#21262d;color:#79c0ff}
    tr:nth-child(even){background:#0f141b}

    button{padding:6px 12px;border:none;border-radius:6px;cursor:pointer;font-size:14px}
    .del{background:#b91c1c;color:white}
    .del:hover{background:#dc2626}
    .clearAll{background:#b91c1c;color:white;margin-top:16px;width:100%;padding:10px;font-size:15px}
    .clearAll:hover{background:#dc2626}
    img{border:1px solid #30363d}
</style>
</head>
<body>

<header>Dashboard Admin â€“ MDH Cloud</header>

<div class="container">
<h2>Data Pelamar</h2>

<div id="dataTable"></div>

<button class="clearAll" onclick="clearAllData()">Hapus Semua Data</button>

</div>

<script>
function loadData(){
    let data = JSON.parse(localStorage.getItem("dataLamaran") || "[]");

    let html = `
    <table>
        <thead>
            <tr>
                <th>No</th>
                <th>Nama</th>
                <th>Posisi</th>
                <th>Email</th>
                <th>Tanggal</th>
                <th>Foto KTP</th>
                <th>Foto Wajah</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
    `;

    if(data.length === 0){
        html += `
            <tr>
                <td colspan="8" style="text-align:center;">Belum ada data lamaran</td>
            </tr>
        `;
    } else {
        data.forEach((d,i)=>{
            html += `
            <tr>
                <td>${i+1}</td>
                <td>${d.nama}</td>
                <td>${d.posisi}</td>
                <td>${d.email}</td>
                <td>${d.tanggal}</td>
                
                <td>
                    ${d.ktp ? `<img src="${d.ktp}" style="width:70px;border-radius:6px;">` : `-`}
                </td>

                <td>
                    ${d.selfie ? `<img src="${d.selfie}" style="width:70px;border-radius:6px;">` : `-`}
                </td>

                <td>
                    <button class="del" onclick="deleteOne(${i})">Hapus</button>
                </td>
            </tr>
            `;
        });
    }

    html += `</tbody></table>`;
    document.getElementById("dataTable").innerHTML = html;
}

function deleteOne(index){
    let data = JSON.parse(localStorage.getItem("dataLamaran") || "[]");
    data.splice(index,1);
    localStorage.setItem("dataLamaran", JSON.stringify(data));
    loadData();
}

function clearAllData(){
    if(confirm("Yakin ingin menghapus semua data?")){
        localStorage.removeItem("dataLamaran");
        loadData();
    }
}

loadData();
</script>

</body>
</html>
