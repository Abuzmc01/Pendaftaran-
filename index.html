<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Form Pendaftaran - MDH Cloud</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif}
    body{background:#0d1117;color:#e6e6e6;padding:20px}
    header{background:#161b22;padding:16px;border-bottom:1px solid #30363d;font-size:20px;font-weight:600;color:#58a6ff;text-align:center;border-radius:8px}
    .container{max-width:760px;background:#161b22;border:1px solid #30363d;margin:28px auto;padding:24px;border-radius:10px}
    h2{text-align:center;margin-bottom:18px;color:#58a6ff}
    label{margin-top:10px;display:block;font-weight:500}
    input,select,textarea{width:100%;margin-top:6px;padding:10px;border:1px solid #30363d;border-radius:6px;background:#0d1117;color:#e6e6e6}
    textarea{resize:none;height:90px}
    .row{display:flex;gap:12px}
    .col{flex:1}
    button{margin-top:16px;width:100%;padding:12px;background:#238636;color:white;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:.25s}
    button:hover{background:#2ea043}
    .success{margin-top:14px;background:#1c7c25;border:1px solid #2ea043;padding:12px;border-radius:6px;display:none;color:#dfffe2;font-size:15px;text-align:center}
    .note{font-size:13px;color:#9aa4b2;margin-top:8px}
</style>
</head>
<body>

<header>Form Rekrutmen â€“ MDH Cloud</header>

<div class="container">
<h2>Isi Data Lamaran</h2>

<form id="lamaranForm">

    <label>Nama Lengkap</label>
    <input type="text" id="nama" required>

    <div class="row">
        <div class="col">
            <label>Umur</label>
            <input type="number" id="umur" required>
        </div>
        <div class="col">
            <label>Jenis Kelamin</label>
            <select id="jk" required>
                <option value="">Pilih</option>
                <option>Laki-Laki</option>
                <option>Perempuan</option>
            </select>
        </div>
    </div>

    <label>Posisi Dilamar</label>
    <select id="posisi" required>
        <option value="">Pilih</option>
        <option>Web Developer</option>
        <option>Technical Support</option>
    </select>

    <label>Ijazah Terakhir</label>
    <select id="ijazah" required>
        <option value="">Pilih</option>
        <option>SMA / SMK</option>
        <option>D3</option>
        <option>S1</option>
        <option>S2</option>
        <option>S3</option>
    </select>

    <label>Keahlian Utama</label>
    <input type="text" id="keahlian" required>

    <label>Pengalaman Kerja (Opsional)</label>
    <textarea id="pengalaman"></textarea>

    <label>Deskripsi Tujuan Melamar</label>
    <textarea id="tujuan" required></textarea>

    <label>Gaji yang Diharapkan (Rp)</label>
    <input type="number" id="gaji" required>

    <label>Email</label>
    <input type="email" id="email" required>

    <label>Nomor HP / WA</label>
    <input type="text" id="hp" required>

    <label>Alamat Tinggal</label>
    <textarea id="alamat" required></textarea>

    <!-- Tambahan -->
    <label>Foto KTP</label>
    <input type="file" id="fotoKTP" accept="image/*" required>

    <label>Foto / Scan Wajah</label>
    <input type="file" id="fotoWajah" accept="image/*" required>

    <button type="submit">Kirim Lamaran</button>

</form>

<div class="success" id="successMsg">
Lamaran berhasil dikirim!
</div>

<div class="note">
    <p>Catatan: Data disimpan di <code>localStorage</code> browser. Untuk melihat/kelola lamaran buka <strong>admin.html</strong> pada browser yang sama (atau ekspor data terlebih dahulu).</p>
</div>

</div>

<script>
// Fungsi convert file ke Base64
function toBase64(file){
    return new Promise((resolve,reject)=>{
        let reader = new FileReader();
        reader.onload = ()=> resolve(reader.result);
        reader.onerror = err => reject(err);
        reader.readAsDataURL(file);
    });
}

// Simple client-side form that saves to localStorage
document.getElementById("lamaranForm").addEventListener("submit", async function(e){
    e.preventDefault();

    // Ambil file
    let ktpFile = document.getElementById("fotoKTP").files[0];
    let wajahFile = document.getElementById("fotoWajah").files[0];

    if(!ktpFile || !wajahFile){
        alert("Foto KTP dan foto wajah wajib diupload!");
        return;
    }

    // Convert ke base64
    let ktpBase64 = await toBase64(ktpFile);
    let wajahBase64 = await toBase64(wajahFile);

    // Ambil data form
    let pelamar = {
        nama: document.getElementById("nama").value.trim(),
        umur: document.getElementById("umur").value.trim(),
        jk: document.getElementById("jk").value,
        posisi: document.getElementById("posisi").value,
        ijazah: document.getElementById("ijazah").value,
        keahlian: document.getElementById("keahlian").value.trim(),
        pengalaman: document.getElementById("pengalaman").value.trim(),
        tujuan: document.getElementById("tujuan").value.trim(),
        gaji: document.getElementById("gaji").value.trim(),
        email: document.getElementById("email").value.trim(),
        hp: document.getElementById("hp").value.trim(),
        alamat: document.getElementById("alamat").value.trim(),
        fotoKTP: ktpBase64,
        fotoWajah: wajahBase64,
        tanggal: new Date().toLocaleString()
    };

    // Simpan ke localStorage
    let data = JSON.parse(localStorage.getItem("dataLamaran") || "[]");
    data.push(pelamar);
    localStorage.setItem("dataLamaran", JSON.stringify(data));

    // Notifikasi sukses
    let s = document.getElementById("successMsg");
    s.style.display = "block";
    setTimeout(()=> s.style.display = "none", 3500);

    // Reset form
    document.getElementById("lamaranForm").reset();
});
</script>

</body>
</html>
